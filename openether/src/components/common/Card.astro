---
interface Props {
  class?: string;
  hover?: boolean;
}

const { class: className = '', hover = false } = Astro.props;
---

<div class={`neon-card group relative bg-surface rounded-xl border border-white/5 p-6 transition-all duration-500 hover:border-primary/40 ${className}`}>
  {hover && (
    <div 
      class="pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100 rounded-xl" 
      style="background: radial-gradient(400px circle at var(--mouse-x) var(--mouse-y), rgba(34, 197, 94, 0.1), transparent 40%);"
    >
    </div>
  )}
  <div class="relative z-10">
    <slot />
  </div>
</div>

<script>
  function updateMousePosition() {
    document.querySelectorAll('.neon-card').forEach((card) => {
      card.addEventListener('mousemove', (e: any) => {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        (card as HTMLElement).style.setProperty('--mouse-x', `${x}px`);
        (card as HTMLElement).style.setProperty('--mouse-y', `${y}px`);
      });
    });
  }

  // Run on initial load
  updateMousePosition();

  // Run on view transitions if enabled
  document.addEventListener('astro:after-swap', updateMousePosition);
</script>
